$(document).ready((function(){var t=[];$(".test__wrapper").on("click",".constructor-card__save",(function(e){e.preventDefault();var n,i=$(this).closest(".constructor-card"),s=$(".constructor-card").index(i)-1,o=function(t){var e=t.find("input:visible").filter((function(){return""===$(this).val().trim()}));return 0===e.length}(i);if(o){var r={};r.title=i.find('input[name="question-text"]').val();var c=i.find("input:visible").val();r.answer=c,t[s]?(t.splice(s,1,r),console.log("Replaced at:",s)):t.push(r),n=""!==$('input[name="test-name"]').val().trim(),0===$(".constructor-card:visible input:visible").filter((function(){return""===$(this).val().trim()})).length&&n&&questions.length>0?$(".constructor__submit").show():$(".constructor__submit").hide(),console.log("Answer saved:",r),console.log("All answers:",t)}else alert("Заполните все поля перед сохранением.")})),$.getJSON("json/test.json",(function(t){$(".test__test-name-field input").val(t.testName),t.questions.forEach((function(t,e){var n=$("#question-template").clone().removeAttr("id").removeAttr("style");if(n.find(".constructor-card__number").text("Вопрос "+(e+1)+":"),n.find(".constructor-card__field-text[name='question-text']").val(t.title),"text"===t.type)n.find(".question--text").show();else if("number"===t.type)n.find(".question--number").show();else if("select"===t.type){n.find(".question--select").show();var i=n.find(".question--select select");t.options.forEach((function(t){i.append($("<option>",{value:t,text:t}))}))}else"date"===t.type&&n.find(".question--date").show();$(".test__wrapper").append(n)}))}))}));